<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type  content="text/html; charset=gb2312" ><title>沙箱环境地址：http://sandbox.kefu.easemob.com</title><!--[if gte mso 9]><xml><w:WordDocument><w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel><w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery><w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery><w:DocumentKind>DocumentNotSpecified</w:DocumentKind><w:DrawingGridVerticalSpacing>7.8</w:DrawingGridVerticalSpacing><w:View>Print</w:View><w:Compatibility><w:DontGrowAutofit/><w:BalanceSingleByteDoubleByteWidth/><w:UseFELayout/></w:Compatibility><w:Zoom>0</w:Zoom></w:WordDocument></xml><![endif]--><!--[if gte mso 9]><xml><w:LatentStyles DefLockedState="false"  DefUnhideWhenUsed="true"  DefSemiHidden="true"  DefQFormat="false"  DefPriority="99"  LatentStyleCount="156" ><w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Normal" ></w:LsdException><w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="heading 1" ></w:LsdException><w:LsdException Locked="false"  Priority="9"  QFormat="true"  Name="heading 2" ></w:LsdException><w:LsdException Locked="false"  Priority="9"  QFormat="true"  Name="heading 3" ></w:LsdException><w:LsdException Locked="false"  Priority="9"  QFormat="true"  Name="heading 4" ></w:LsdException><w:LsdException Locked="false"  Priority="9"  QFormat="true"  Name="heading 5" ></w:LsdException><w:LsdException Locked="false"  Priority="9"  QFormat="true"  Name="heading 6" ></w:LsdException><w:LsdException Locked="false"  Priority="9"  QFormat="true"  Name="heading 7" ></w:LsdException><w:LsdException Locked="false"  Priority="9"  QFormat="true"  Name="heading 8" ></w:LsdException><w:LsdException Locked="false"  Priority="9"  QFormat="true"  Name="heading 9" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index 1" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index 2" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index 3" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index 4" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index 5" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index 6" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index 7" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index 8" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index 9" ></w:LsdException><w:LsdException Locked="false"  Priority="39"  Name="toc 1" ></w:LsdException><w:LsdException Locked="false"  Priority="39"  Name="toc 2" ></w:LsdException><w:LsdException Locked="false"  Priority="39"  Name="toc 3" ></w:LsdException><w:LsdException Locked="false"  Priority="39"  Name="toc 4" ></w:LsdException><w:LsdException Locked="false"  Priority="39"  Name="toc 5" ></w:LsdException><w:LsdException Locked="false"  Priority="39"  Name="toc 6" ></w:LsdException><w:LsdException Locked="false"  Priority="39"  Name="toc 7" ></w:LsdException><w:LsdException Locked="false"  Priority="39"  Name="toc 8" ></w:LsdException><w:LsdException Locked="false"  Priority="39"  Name="toc 9" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Normal Indent" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="footnote text" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="annotation text" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="header" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="footer" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="index heading" ></w:LsdException><w:LsdException Locked="false"  Priority="35"  QFormat="true"  Name="caption" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="table of figures" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="envelope address" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="envelope return" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="footnote reference" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="annotation reference" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="line number" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="page number" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="endnote reference" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="endnote text" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="table of authorities" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="macro" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="toa heading" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Bullet" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Number" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List 2" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List 3" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List 4" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List 5" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Bullet 2" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Bullet 3" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Bullet 4" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Bullet 5" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Number 2" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Number 3" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Number 4" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Number 5" ></w:LsdException><w:LsdException Locked="false"  Priority="10"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="Title" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Closing" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Signature" ></w:LsdException><w:LsdException Locked="false"  Priority="1"  Name="Default Paragraph Font" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Body Text" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Body Text Indent" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Continue" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Continue 2" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Continue 3" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Continue 4" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="List Continue 5" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Message Header" ></w:LsdException><w:LsdException Locked="false"  Priority="11"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="Subtitle" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Salutation" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Date" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Body Text First Indent" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Body Text First Indent 2" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Note Heading" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Body Text 2" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Body Text 3" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Body Text Indent 2" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Body Text Indent 3" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Block Text" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Hyperlink" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="FollowedHyperlink" ></w:LsdException><w:LsdException Locked="false"  Priority="22"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="Strong" ></w:LsdException><w:LsdException Locked="false"  Priority="20"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="Emphasis" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Document Map" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Plain Text" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="E-mail Signature" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Normal (Web)" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Acronym" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Address" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Cite" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Code" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Definition" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Keyboard" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Preformatted" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Sample" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Typewriter" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="HTML Variable" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Normal Table" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="annotation subject" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="No List" ></w:LsdException><w:LsdException Locked="false"  Priority="99"  Name="Balloon Text" ></w:LsdException></w:LatentStyles></xml><![endif]--><style>
@font-face{
font-family:"Times New Roman";
}

@font-face{
font-family:"宋体";
}

@font-face{
font-family:"Wingdings";
}

@list l0:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:39.0000pt;
mso-level-number-position:left;
margin-left:39.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

@list l1:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:81.0000pt;
mso-level-number-position:left;
margin-left:81.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l2:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:18.0000pt;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

@list l3:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:18.0000pt;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l4:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:60.0000pt;
mso-level-number-position:left;
margin-left:60.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l5:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:60.0000pt;
mso-level-number-position:left;
margin-left:60.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

@list l6:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:39.0000pt;
mso-level-number-position:left;
margin-left:39.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l7:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:102.0000pt;
mso-level-number-position:left;
margin-left:102.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Wingdings'; }

@list l8:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:81.0000pt;
mso-level-number-position:left;
margin-left:81.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

@list l9:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:102.0000pt;
mso-level-number-position:left;
margin-left:102.0000pt; text-indent:-18.0000pt; margin-bottom:0pt; margin-top:0pt; font-family:'Times New Roman'; }

@list l10:level1{
mso-level-start-at:3;
mso-level-number-format:decimal;
mso-level-suffix:none;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-bottom:0pt; margin-top:0pt; margin-left:0.0000pt;
text-indent:0.0000pt;
font-family:'Times New Roman'; }

p.p0{
margin:0pt;
margin-bottom:0.0001pt;
margin-bottom:0pt;
margin-top:0pt;
font-family:'Times New Roman'; }
@page{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}@page Section0{
margin-top:36.0000pt;
margin-bottom:36.0000pt;
margin-left:36.0000pt;
margin-right:36.0000pt;
size:595.3000pt 841.9000pt;
layout-grid:15.6000pt;
}
div.Section0{page:Section0;}</style></head><body style="tab-interval:36pt; text-justify-trim:punctuation; " ><!--StartFragment--><div class="Section0"  style="layout-grid:15.6000pt;
" ><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >沙箱环境地址：</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >http://sandbox.kefu.easemob.com</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >Demo:</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >-----------------------------------------------------------------------------------</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >define(function(require){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;Sock&nbsp;=&nbsp;require("sockjs");</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;conn;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;openTimer&nbsp;=&nbsp;0;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;retryDelay&nbsp;=&nbsp;0;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;inited&nbsp;=&nbsp;false;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;RETRY_DELAY&nbsp;=&nbsp;15000;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;OPEN_FAIL&nbsp;=&nbsp;20000;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;seqId&nbsp;=&nbsp;0;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;hbInter&nbsp;=&nbsp;0;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;Connection(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me&nbsp;=&nbsp;this;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sock&nbsp;=&nbsp;new&nbsp;Sock("/push?chid="&nbsp;+&nbsp;ssid);</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sock.onopen&nbsp;=&nbsp;function(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sock.onmessage&nbsp;=&nbsp;function(resp){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//resp.data&nbsp;&nbsp;消息体</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;dat&nbsp;=&nbsp;JSON.parse(resp.data)&nbsp;||&nbsp;{};</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sock.onclose&nbsp;=&nbsp;function(e){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;me.reconnect();</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.close&nbsp;=&nbsp;function(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this.sock){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sock.close();</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else{</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reconnect();</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reconnect&nbsp;=&nbsp;function(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(retryDelay){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(openTimer);</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retryDelay&nbsp;=&nbsp;setTimeout(function(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retryDelay&nbsp;=&nbsp;0;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;createConnection();</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;RETRY_DELAY);</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.heartbeat&nbsp;=&nbsp;function(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this.sock){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.send(JSON.stringify({</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keepalive:&nbsp;&nbsp;sockPath</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}));</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.send&nbsp;=&nbsp;function(msg){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this.sock.readyState&nbsp;===&nbsp;1){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sock.send(msg);</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;createConnection(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(conn){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn.close();</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn&nbsp;=&nbsp;null;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else{</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn&nbsp;=&nbsp;new&nbsp;Connection();</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(openTimer);</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;openTimer&nbsp;=&nbsp;setTimeout(function(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;createConnection();</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;OPEN_FAIL);</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start:&nbsp;function(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!inited){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inited&nbsp;=&nbsp;true;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;createConnection();</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startHeartBeat:&nbsp;function(inter){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//inter&nbsp;心跳间隔</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(hbInter)&nbsp;return;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hbInter&nbsp;=&nbsp;setInterval(function(){</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn&nbsp;&&&nbsp;conn.heartbeat();</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;inter);</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;};</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >});</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; border-bottom:0.5000pt solid rgb(0,0,0); mso-border-bottom-alt:0.5000pt solid rgb(0,0,0); padding:0pt 0pt 0pt 0pt ; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >集成说明：</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >1</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >.&nbsp;WebSocket</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >动态</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >参数</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >ssid</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >，</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >sockPath</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >获取：</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;登陆沙箱后调取接口：</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >http://sandbox.kefu.easemob.com/home/initdata</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;response:</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;{</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"sessionId":&nbsp;"xxx",</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"resource":"xxx"</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;sessionId即是我们需要的</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >ssid</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="text-indent:24.0000pt; margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >resource即是我们需要的</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >sockPath</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="text-indent:24.0000pt; margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="text-indent:24.0000pt; margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >所以在启动</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >websocket</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >前要先确保获取这两个参数。</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >2.&nbsp;var&nbsp;Sock&nbsp;=&nbsp;require("sockjs");</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >require("sockjs")是一个强依赖，必须依赖它才能正常通信</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >，</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >这是跟我们后端协议特殊性有关</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >。</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; mso-list:l10 level1 lfo1;
" ><![if !supportLists]><span style="font-size:12.0000pt; font-family:'宋体'; " ><span style='mso-list:Ignore;
' >3.</span></span><![endif]><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >将</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >demo</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >模块</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >require</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >到项目里，调用</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >start()</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >方法，启动</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >websocket</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >连接</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >。待链接成功后调用</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " >startHeartBeat(inter)</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >启动心跳</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >，</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >否则后端超时机制有可能会断开连接。</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >4.&nbsp;&nbsp;onmessage回调就是事件通知，事件返回数据结构：</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"body":&nbsp;{</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"messageType":&nbsp;"xxxxx"</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;]</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;messageType：代表具体的业务消息类型。</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;比如：</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VisitUserWaitingListChange&nbsp;待接入列表变化</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NewChatMessage&nbsp;&nbsp;新来访客消息</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'宋体'; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Schedule&nbsp;会话调度</span><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p></o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p><p class=p0  style="margin-bottom:0pt; margin-top:0pt; text-autospace:ideograph-other; " ><span style="mso-spacerun:'yes'; font-size:12.0000pt; font-family:'Times New Roman'; " ><o:p>&nbsp;</o:p></span></p></div><!--EndFragment--></body></html>